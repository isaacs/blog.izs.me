---
layout: layouts/base.njk
templateClass: tmpl-post
permalink: "{{ slug | postPermalink(page) }}/index.html"
---
<h1>{{ title }}</h1>

<p><a class="post-date" href="{{ slug | postPermalink(page) | url }}"><time datetime="{{ page.date | htmlDateString }}">{{ page.date | readableDate }}</time></a></p>

{%- if link_url and link_publisher %}
<p><a href="{{ link_url | url }}">{{ link_publisher }}</a></p>
{%- endif %}

{{ page | tumble({
  photos: photos,
  video: video,
  audio: audio,
  youtube: youtube,
  vimeo: vimeo,
  tiktok: tiktok,
  soundcloud: soundcloud,
  videofile: videofile
}) | safe }}

{{ content | localImage(page) | safe }}

{%- for tag in tags | filterTagList -%}
{%- if not didFirstTag %}
{%- set didFirstTag %}true{% endset -%}
<p>
{% endif -%}
{%- set tagUrl %}/tags/{{ tag | slug }}/{% endset -%}
<a href="{{ tagUrl | url }}" class="post-tag">{{ tag }}</a>
{%- endfor %}
{%- if didFirstTag %}</p>{% endif -%}

{%- if via or source %}
<div class="post-footer">

{%- if via %}
<p>Via: <a href="{{ via.url | url }}">{{via.title}}</a></p>
{%- endif %}

{%- if source %}
<p>Source: <a href="{{ source.url | url }}">{{source.title}}</a></p>
{%- endif %}

{%- endif %}

</div>

{%- if collections.posts %}
{%- set nextPost = collections.posts | getNextCollectionItem(page) %}
{%- set previousPost = collections.posts | getPreviousCollectionItem(page) %}
{%- if nextPost or previousPost %}
<hr>
<ul>
  {%-
    if nextPost
  %}<li>Next: <a href="{{ nextPost.url | url }}">{%
    if nextPost.data.title
      %}{{ nextPost.data.title }}{%
    elseif nextPost.data.slug
      %}{{ nextPost.data.slug }}{%
    else
      %}{{ nextPost.url }}{%
    endif
  %}</a></li>{% endif %}
  {%-
    if previousPost
  %}<li>Previous: <a href="{{ previousPost.url | url }}">{%
    if previousPost.data.title
      %}{{ previousPost.data.title }}{%
    elseif previousPost.data.slug
      %}{{ previousPost.data.slug }}{%
    else
      %}{{ previousPost.url }}{%
    endif
    %}</a></li>{% endif %}
</ul>
{%- endif %}
{%- endif %}
